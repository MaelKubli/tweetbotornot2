<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Introduction • tweetbotornot2</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.1/css/all.min.css" integrity="sha256-PbSmjxuVAzJ6FPvNYsrXygfGhNJYyZ2GktDbkMBqQZg=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.1/css/v4-shims.min.css" integrity="sha256-A6jcAdwFD48VMjlI3GDxUd+eCQa7/KWy6G9oe/ovaPA=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Introduction">
<meta property="og:description" content="">
<meta property="og:image" content="https://tweetbotornot2.mikewk.com/logo.png">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">tweetbotornot2</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/bulk.html">Getting estimates for lots of users</a>
    </li>
    <li>
      <a href="../articles/intro.html">Introduction</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/mkearney/tweetbotornot2">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Introduction</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/mkearney/tweetbotornot2/blob/master/vignettes/intro.Rmd"><code>vignettes/intro.Rmd</code></a></small>
      <div class="hidden name"><code>intro.Rmd</code></div>

    </div>

    
    
<p>This vignette provides a quick introduction to the tweetbotornot2 package. <strong>Section 1</strong> gives quick examples of the main functionality offered by this package. And <strong>Section 2</strong> provides background and addresses some common issues related to obtaining the proper authorization for interacting with Twitter’s REST API.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a><span class="co">## load package</span></span>
<span id="cb1-2"><a href="#cb1-2"></a><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(tweetbotornot2)</span></code></pre></div>
<div id="bot-probability-estimates" class="section level2">
<h2 class="hasAnchor">
<a href="#bot-probability-estimates" class="anchor"></a>1. Bot probability estimates</h2>
<p>The main use case for {tweetbotornot} is to get bot-probability estimates for one or more Twitter accounts. This can be done with either <code><a href="../reference/predict_bot.html">predict_bot()</a></code> or <code><a href="../reference/predict_bot.html">predict_bot_score()</a></code>. The former returns a <code>data.table</code> with user information (user ID and screen name). The latter returns a numeric vector of estimates matched to the input order of users.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a><span class="co">## returns a data.table</span></span>
<span id="cb2-2"><a href="#cb2-2"></a><span class="kw"><a href="../reference/predict_bot.html">predict_bot</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"netflix_bot"</span>, <span class="st">"PatrickMahomes"</span>))</span>
<span id="cb2-3"><a href="#cb2-3"></a></span>
<span id="cb2-4"><a href="#cb2-4"></a><span class="co">## returns a numeric vector</span></span>
<span id="cb2-5"><a href="#cb2-5"></a><span class="kw"><a href="../reference/predict_bot.html">predict_bot_score</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"netflix_bot"</span>, <span class="st">"PatrickMahomes"</span>))</span></code></pre></div>
<p>One thing missing from the above code of course is the actual Twitter data used to make the bot probability estimates. When screen names (or user IDs) are provided, tweetbotornot2 does that work (with the help of the <a href="https://rtweet.info">rtweet</a> package) behind the scenes. But in order for the rtweet package to work, users must obtain the proper authorization to interact with Twitter’s REST API. For most users this process is now a breeze–users can run the above code and if necessary they will be prompted to authorize access to the embedded rtweet app. But for users working on remote servers or trying to generate estimates on thousands or millions of Twitter uers, the next section will get into some of the relevant details regarding API authorization.</p>
</div>
<div id="authentication" class="section level2">
<h2 class="hasAnchor">
<a href="#authentication" class="anchor"></a>2. Authentication</h2>
<p>Use of this package typically<sup>1</sup> requires, at a minimum, (a) internet connection and (b) an active Twitter account–i.e., you will need to authorize rtweet’s <em>rstats2twitter</em> app to act (communicate from R to Twitter) on behalf of your Twitter account. If you’re already signed into Twitter on your web browser, this can be done with a single click. Otherwise, you will have to sign in and <em>then</em> click.</p>
<div id="savingusing-twitter-api-token" class="section level3">
<h3 class="hasAnchor">
<a href="#savingusing-twitter-api-token" class="anchor"></a>Saving/using Twitter API token</h3>
<p>If you’re working in an interactive R session on a local machine (in the RStudio application, for example), this process should be relatively straight forward.<sup>1</sup> However, if you’re working on a remote server or in the cloud (in RStudio Server, for example), then it’s a bit trickier. The easiest solution is to start a local, interactive session of R and then do the following:</p>
<ol style="list-style-type: decimal">
<li>
<p><strong>On a machine with a local version of R</strong>, send API request via {rtweet}</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a>rstats &lt;-<span class="st"> </span>rtweet<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/rtweet/man/search_tweets.html">search_tweets</a></span>(<span class="st">"rstats"</span>)</span></code></pre></div>
</li>
<li>
<p>The above code actually creates (as a side effect) a Twitter token for you. So, on the same machine, save the token as an <code>.rds</code> file</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1"></a><span class="kw"><a href="https://rdrr.io/r/base/readRDS.html">saveRDS</a></span>(rtweet<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/rtweet/man/get_tokens.html">get_token</a></span>(), <span class="st">"rtweet_token.rds"</span>)</span></code></pre></div>
</li>
<li><p>Upload the saved token file to your <strong>cloud/server</strong></p></li>
<li>
<p>Once the token is uploaded to the cloud, you can read the token file and specify the resulting object in each {tweetbotornot} call, e.g.,</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a>token &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/readRDS.html">readRDS</a></span>(<span class="st">"rtweet_token.rds"</span>)</span>
<span id="cb5-2"><a href="#cb5-2"></a><span class="kw"><a href="../reference/predict_bot.html">predict_bot</a></span>(<span class="st">"jack"</span>, <span class="dt">token =</span> token)</span></code></pre></div>
<p>or set the path to the saved token as an R environment variable. The latter option (example below) allows you to avoid having to specify the token each time.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1"></a><span class="kw"><a href="https://rdrr.io/r/base/Sys.setenv.html">Sys.setenv</a></span>(<span class="dt">TWITTER_PAT =</span> <span class="st">"/path/to/rtweet_token.rds"</span>)</span>
<span id="cb6-2"><a href="#cb6-2"></a><span class="kw"><a href="../reference/predict_bot.html">predict_bot</a></span>(<span class="st">"jack"</span>)</span></code></pre></div>
<p>or set the R environment variable for current <strong>and</strong> future sessions (on a given machine), you can also try <code><a href="https://tfse.mikewk.com//reference/set_renv.html">tfse::set_renv()</a></code>.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1"></a>tfse<span class="op">::</span><span class="kw"><a href="https://tfse.mikewk.com//reference/set_renv.html">set_renv</a></span>(<span class="dt">TWITTER_PAT =</span> <span class="st">"/path/to/rtweet_token.rds"</span>)</span></code></pre></div>
</li>
</ol>
</div>
<div id="rate-limits" class="section level3">
<h3 class="hasAnchor">
<a href="#rate-limits" class="anchor"></a>Rate limits</h3>
<p>Assuming users haven’t made any recent calls to Twitter’s API, the predict functions described earlier should work for up to 900 users at a time. For some users (e.g., those with a Twitter token created using credentials from their own Twitter application or tokens created at a time of sufficiently provided permissions by the embedded rtweet app) it’s possible to get estimates for up to 1,500 accounts at a time using Twitter’s application-only (bearer) token. Converting a normal user token into a bearer token requires an access level of <code>"read-write-directmessages"</code>. The code below should print the access level associated with your current token.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1"></a><span class="co">## view access level of current token</span></span>
<span id="cb8-2"><a href="#cb8-2"></a><span class="kw"><a href="https://rdrr.io/r/base/print.html">print</a></span>(rtweet<span class="op">:::</span><span class="kw">api_access_level</span>())</span></code></pre></div>
<p>The drawback to the application-only authorization method is that your requests will contain no information about the authenticating user. The upside to this kind of token is access to a different set of rate limits. The different rate limits aren’t always desirable (compared to the normal user token), but for the some endpoints–like <code>users/timelines</code> (900 vs. 1,500 requests per 15 min.) and <code>search/tweets</code> (18,000 vs. 45,000 requests per 15 min.)–the difference is quite significant.</p>
<p>If the output from the above code was <code>"read-write-directmessages"</code>, then users can specify the bearer token via <code><a href="https://rdrr.io/pkg/rtweet/man/bearer_token.html">rtweet::bearer_token()</a></code> for the <code>token</code> argument in bot-predicting calls. The code below, for example, checks the bearer token rate limit before and after executing <code><a href="../reference/predict_bot.html">predict_bot()</a></code>.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1"></a><span class="co">## check bearer token rate limit</span></span>
<span id="cb9-2"><a href="#cb9-2"></a>rtweet<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/rtweet/man/rate_limit.html">rate_limit</a></span>(rtweet<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/rtweet/man/bearer_token.html">bearer_token</a></span>(), <span class="st">"get_timeline"</span>)</span>
<span id="cb9-3"><a href="#cb9-3"></a></span>
<span id="cb9-4"><a href="#cb9-4"></a><span class="co">## get bot estimates for two users</span></span>
<span id="cb9-5"><a href="#cb9-5"></a><span class="kw"><a href="../reference/predict_bot.html">predict_bot</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"netflix_bot"</span>, <span class="st">"PatrickMahomes"</span>), <span class="dt">token =</span> rtweet<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/rtweet/man/bearer_token.html">bearer_token</a></span>())</span>
<span id="cb9-6"><a href="#cb9-6"></a></span>
<span id="cb9-7"><a href="#cb9-7"></a><span class="co">## re-check bearer token rate limit</span></span>
<span id="cb9-8"><a href="#cb9-8"></a>rtweet<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/rtweet/man/rate_limit.html">rate_limit</a></span>(rtweet<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/rtweet/man/bearer_token.html">bearer_token</a></span>(), <span class="st">"get_timeline"</span>)</span></code></pre></div>
<p><sup>1</sup> Unless you’ve already collected user timeline data, <strong><a href="tweetbotornot2.mikewk.com"><code>{tweetbotornot2}</code></a></strong> relies on <a href="https://rtweet.info"><code>{rtweet}</code></a> to pull data from <a href="https://developer.twitter.com/en/docs">Twitter’s REST API</a>.</p>
<p><sup>2</sup> The first time you make a request [from your computer] to Twitter’s API’s, a browser should pop-up, asking you to authorize the app. After that, the authorization token is stored and remembered behind the scenes (you will only have to reauthorize the app if your Twitter settings or token credentials get reset or if you use a different machine).</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">

        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#bot-probability-estimates">1. Bot probability estimates</a></li>
      <li><a href="#authentication">2. Authentication</a></li>
      </ul>
</div>
      </div>

</div>



      <footer><div class="copyright">
  <p>Developed by <a href="https://mikewk.com">Michael W. Kearney</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.9000.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
